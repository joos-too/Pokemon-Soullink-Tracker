{
  "rules": {
    "users": {
      "$uid": {
        ".read": "auth.uid === $uid",
        ".write": "auth.uid === $uid"
      }
    },
    "userTrackers": {
      "$uid": {
        ".read": "auth.uid === $uid",
        "$trackerId": {
          ".write": "auth.uid === $uid || root.child('trackers').child($trackerId).child('meta').child('members').child(auth.uid).child('role').val() === 'owner'"
        }
      }
    },
    "userEmails": {
      ".read": false,
      "$emailKey": {
        ".read": "auth.uid != null",
        ".write": "auth.uid != null && ((newData.exists() && newData.child('uid').val() === auth.uid) || (!newData.exists() && data.child('uid').val() === auth.uid))"
      }
    },
    "trackers": {
      "$trackerId": {
        ".read": "(auth.uid != null && (root.child('trackers').child($trackerId).child('meta').child('members').child(auth.uid).exists() || root.child('trackers').child($trackerId).child('meta').child('guests').child(auth.uid).exists())) || root.child('trackers').child($trackerId).child('meta').child('isPublic').val() === true",
        ".write": "auth.uid != null && (newData.child('meta').child('members').child(auth.uid).exists() || root.child('trackers').child($trackerId).child('meta').child('members').child(auth.uid).exists())"
      }
    }
  }
}
